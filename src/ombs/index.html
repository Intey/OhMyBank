<html>
<head>
    <title>Example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" 
            src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">
    </script>

    <script>
        //add li elem with each user in $user-list
        function renderUsers(users) {
            console.log("rendering users" + users);
            $('#user-list').empty();
            for(user in users) { 
                $('#user-list').append( $('<li/>', { html: users[user] }) ); 
            }
        }

        function getUsers() { $.get("/users", renderUsers); }

        function handleError(xhr) {
            $('#error').text(xhr.statusText + ": " + xhr.responseText);
        }

        function addUser() { 
            var jqxhr = $.post("/add-user", { user: $('#name').val() }, renderUsers).fail(handleError); 
        }
        //init
        $(function() { getUsers(); });
    </script>
</head>
<body>
    <h1>Welcome</h1>

    <p id="username"></p>

    <form method="get" action="/register">
        <input type="submit" value="log up"/>
    </form>

    <!--<ul id="user-list"></ul>-->

    <input type="text" id="name" placeholder="user name"/>
    <button onclick="addUser()">Add User</button>
</body>
</html>
