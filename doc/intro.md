# Introduction to omb_s
Все начинается с создания события, вводятся сумма, название, дата, количество
частей(если есть) и участники(если известно). На данном этапе можно принять
участие в событии или отказаться от него. Так же, видим прогнозируемую цену
участия(для частичного события - цена одного куска).

Когда количество участников стало константным, событие запускается. При
запуске, выполняется расчет долгов и появляется возможность оплаты. Когда в
запущенном событии, происходит изменение состава участников, происходит
перерасчет долгов.

- обсудить как лучше это отобразить.

**User story**: Я учавствую в стартанувшем событии. Выполнил оплату указанной
суммы, автор подтвердил.  Затем кто-то принял отказался от участия в событии. В
итоге, его сумма была поделена поровну между участниками и я сново должен
автору какие-то гроши.

После перерасчета, пользователь может лицезреть изменения в балансе. Важно
показать именно _diff_ с привязкой к "мета-событию": новый участник, ливер,
уточнение цены и т.д.

Когда в событие внесен последний грош - оно закрывается и отправляется в архив.


## Сущности
- Событие
- Юзер
- Админ
- "проводка"

## Связи

### Событие создается юзером
Внос в банк актива - получение денег.
#### Безопасность
Можно конечно создать событие на 100500 "мильйонов" и попросить у банкира
лавандосы.
Решается проверкой баланса пере выводом: На вывод доступна сумма оплаты другими
пользователями событий запрашивающего вывод.

### Насколько длинные у админа руки
Как у Чака Норриса.

### Проводки
Хранят записи о всех оплатах, взносах и др.
#### Как хранить: фактор или бабло
##### Бабло: прозрачны изменения в балансе
При изменении состава участников в событии, мы выполняем расчет сумм и
записываем их в таблицу. Т.о. для отображения пользователю мы просто
запрашиваем данные из БД.
##### Фактор: гибкость расчетов
При изменении состава участников в событии, мы в очередной раз выполняем
функцию расчета суммы долга/баланса, перед тем как показать ее клиенту.
Так же концепция "частичных событий" получает статус абстрактного события -
любое событие становится разделенным на части. Количество частей - сумма
факторов участников.
